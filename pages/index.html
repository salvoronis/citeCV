<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Main Page</title>
    <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </head>
  <body>
    <p>Hello, <a href="/profile?name={{.Username}}">{{.Username}}</a></p>
    <p><a href="/logout">Exit</a></p>
    <p>
      <button type="button" id="prew"><</button>
      <i>Номер недели <strong id="weekn"></strong></i>
      <button type="button" id="next">></button>
    </p>
    <table>
      <tr id="header">
        <th>Subject</th>
        <th>Time</th>
        <th>Classroom</th>
        <th>Teacher</th>
        <th>Week day</th>
        <th>Grade</th>
      </tr>
    </table>
  </body>
  <script type="text/javascript">
  var shit = Math.ceil((new Date() - new Date("2019/08/30"))/(1000*60*60*24*7))
  var week = shit;
  function timetable(week){
    $.ajax({
      url: '/gettimetable',
      dataType: 'text',
      data: 'week='+week,
      type: 'get',
      success: function(response){
        console.log(response);
        $("#header").html(response);
      }
    });
  }
  timetable(week);
  $("#weekn").html(week)
  $("#prew").click(function(){
    week -= 1;
    timetable(week)
    $("#weekn").html(week)
  });
  $("#next").click(function(){
    week += 1;
    timetable(week)
    $("#weekn").html(week)
  });
  </script>
</html>
